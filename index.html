<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dalhousie Trip Birthday</title>
<style>
* { box-sizing: border-box; margin:0; padding:0; }
body, html { height: 100%; font-family: 'Arial', sans-serif; overflow: hidden; }

.stage-wrapper { position: relative; width: 100%; height: 100%; }

/* Stage styling */
.stage {
  width: 100%;
  height: 100%;
  padding: 40px;
  text-align: center;
  position: relative;
}

h1 { color: #fff; font-size: 2.5em; margin-bottom: 20px; text-shadow: 2px 2px 6px #000; }
.cake { font-size: 1.5em; }

input[type="text"] {
  padding: 15px 20px;
  font-size: 1.2em;
  border-radius: 10px;
  border: 2px solid #333;
  margin-right: 10px;
  text-align: center;
}

button {
  padding: 15px 30px;
  font-size: 1.3em;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  font-weight: bold;
  transition: transform 0.3s, background 0.3s, color 0.3s;
}

/* Button colors */
#goBtn { background-color: #ff6f61; color: white; }
#startBtn { background-color: #4CAF50; color: white; }
#memoryStart { background-color: #ffb347; color: white; }
.nextBtn, .prevBtn { background-color: #1E90FF; color:white; margin: 10px; }

button:hover { transform: scale(1.05); filter: brightness(1.2); }

/* Video & Memory image */
video { max-width: 90%; border-radius: 10px; margin-top: 20px; }
#memoryImg { max-width: 90%; max-height: 60%; border-radius: 15px; margin-top: 20px; box-shadow: 0 0 15px #000; }

/* Final Stage */
#finalStage { background-color: #ff69b4; color: white; display:flex; flex-direction:column; justify-content:center; align-items:center; }

/* Balloons animation */
.balloon {
  position: absolute;
  width: 50px;
  height: 70px;
  border-radius: 50%;
  bottom: -100px;
  animation: rise linear infinite;
}

@keyframes rise {
  0% { transform: translateY(0) rotate(0deg); }
  100% { transform: translateY(-120vh) rotate(360deg); }
}
</style>
</head>
<body>

<div class="stage-wrapper" id="wrapper">

  <!-- Stage 1: Name input -->
  <div class="stage" id="stage1" style="background: url('background.jpg') no-repeat center center; background-size: cover;">
    <h1 id="stage1Header">All friends from Dalhousie trip wish you a very happy birthday <span class="cake">ðŸŽ‚</span></h1>
    <input type="text" id="firstName" placeholder="Enter your first name">
    <button id="goBtn">GO</button>
  </div>

  <!-- Stage 2: Greeting -->
  <div class="stage" id="stage2" style="display:none; background: url('background.jpg') no-repeat center center; background-size: cover;">
    <h1 id="greetName">Happy Birthday!</h1>
    <button id="startBtn">Can we start?</button>
  </div>

  <!-- Stage 3: Video -->
  <div class="stage" id="stage3" style="display:none; background: pink;">
    <video id="birthdayVideo" controls>
      <source src="video.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <button id="memoryStart">Memory Start</button>
  </div>

  <!-- Stage 4: Memories -->
  <div class="stage" id="stage4" style="display:none; background:black;">
    <img id="memoryImg" src="mem1.jpg" alt="Memory Image">
    <div>
      <button class="prevBtn">Previous</button>
      <button class="nextBtn">Next</button>
    </div>
  </div>

  <!-- Stage 5: Final Wish -->
  <div class="stage" id="finalStage" style="display:none;">
    <h1>Wish you a good day! ðŸŽ‰</h1>
  </div>

</div>

<!-- Balloons container (Stage 1, 2, and Final) -->
<div id="balloonsContainer"></div>

<script>
// Balloons creation
function createBalloons(num = 10) {
  const container = document.getElementById('balloonsContainer');
  container.innerHTML = ''; // Clear old balloons
  for(let i=0; i<num; i++){
    const b = document.createElement('div');
    b.classList.add('balloon');
    b.style.left = Math.random() * 90 + '%';
    b.style.background = `hsl(${Math.random()*360}, 70%, 60%)`;
    b.style.animationDuration = 8 + Math.random()*5 + 's';
    container.appendChild(b);
  }
}
createBalloons(15);

// Stage switching function (instant)
function goToStage(index) {
  const stages = document.querySelectorAll('.stage');
  stages.forEach((stage, i) => {
    stage.style.display = i === index ? 'block' : 'none';
  });

  const balloons = document.getElementById('balloonsContainer');
  // Show balloons in Stage 1, Stage 2, and Final Stage (0,1,4)
  if(index === 0 || index === 1 || index === 4){
    balloons.style.display = 'block';
    createBalloons(15); // regenerate balloons each time
  } else {
    balloons.style.display = 'none';
  }
}

// Stage 1 â†’ Stage 2
document.getElementById('goBtn').addEventListener('click', ()=>{
  const name = document.getElementById('firstName').value || '';
  document.getElementById('stage1Header').textContent = `All friends from Dalhousie trip wish you a very happy birthday, ${name} ðŸŽ‚`;
  document.getElementById('greetName').textContent = `Happy Birthday, ${name}! ðŸŽ‚`;
  goToStage(1);
});

// Stage 2 â†’ Stage 3
document.getElementById('startBtn').addEventListener('click', ()=>{
  goToStage(2);
  document.getElementById('birthdayVideo').play();
});

// Stage 3 â†’ Stage 4 after video ends
document.getElementById('birthdayVideo').addEventListener('ended', ()=>{
  goToStage(3);
});

// Memories navigation (5 images)
const memoryImages = [
  'mem1.jpg',
  'mem2.jpg',
  'mem3.jpg',
  'mem4.jpg',
  'mem5.jpg'
];
let memIndex = 0;
const memImg = document.getElementById('memoryImg');

document.querySelector('.nextBtn').addEventListener('click', ()=>{
  if(memIndex < memoryImages.length-1){
    memIndex++; 
    memImg.src = memoryImages[memIndex];
  } else { 
    goToStage(4); 
  }
});

document.querySelector('.prevBtn').addEventListener('click', ()=>{
  if(memIndex > 0){ 
    memIndex--; 
    memImg.src = memoryImages[memIndex]; 
  }
});

// Memory Start button
document.getElementById('memoryStart').addEventListener('click', ()=>{
  goToStage(3);
  document.getElementById('birthdayVideo').pause();
});
</script>

</body>
</html>
